import*as e from"@wordpress/interactivity";var t={d:(e,s)=>{for(var r in s)t.o(s,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:s[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const s=(o={getConfig:()=>e.getConfig,getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store},c={},t.d(c,o),c),{state:r,actions:n}=(0,s.store)("whitehouse-newsletter",{state:{get successes(){const{responses:e}=(0,s.getContext)();return e.filter((e=>"success"===e.result))},get errors(){const{responses:e}=(0,s.getContext)();return e.filter((e=>"error"===e.result))},get message(){const{item:e}=(0,s.getContext)();return e?.msg||""},get hasSuccess(){return r.successes.length>0}},actions:{submit:e=>{e.preventDefault();const t=(0,s.getContext)();t.responses=[],t.submitting=!0;const{ref:r}=(0,s.getElement)(),{spamMessage:o}=(0,s.getConfig)(),c=new FormData(r);if(Object.fromEntries(c.entries()).b_255057cc391ca0facb169b81c_004f59aa22)return t.responses.push({result:"error",msg:o}),void(t.submitting=!1);let a=t.formAction;a=a.replace("/post?u=","/post-json?u="),a+="&c=%3BwhNewsletterHandleScriptResponse",a=`${a}&${new URLSearchParams(c).toString()}`,n.transport(a)},transport:e=>{const{errorMessage:t}=(0,s.getConfig)(),r=(0,s.getContext)(),n=document.createElement("script");n.async=!0,n.src=e,window.whNewsletterHandleScriptResponse=e=>{const t=new CustomEvent("whmccallback",{detail:e});window.dispatchEvent(t)},n.onerror=()=>{r.responses.push({result:"error",msg:t}),r.submitting=!1,document.head.removeChild(n),window.whNewsletterHandleScriptResponse=void 0},n.onload=()=>{r.submitting=!1,document.head.removeChild(n),window.whNewsletterHandleScriptResponse=void 0},document.head.appendChild(n)}},callbacks:{complete:()=>{const{ref:e}=(0,s.getElement)();r.hasSuccess&&e.remove()},transportComplete:e=>{const t=(0,s.getContext)(),{communityEmbedId:r}=(0,s.getConfig)(),n=e.detail;if("success"!==n?.result&&"captcha"===n?.msg);else if("success"!==n?.result)try{const e=n.msg.split(" - ",2);void 0!==e[1]&&parseInt(e[0]).toString()===e[0]&&(n.msg=e[1])}catch(e){}if("success"===n?.result&&r){const e=document.createElement("script");e.async=!0,e.src="https://mgu-embed.community.com/embed.js",e.dataset.communityEmbedId=r,document.head.appendChild(e)}t.responses.push(n)}}},{lock:!0});var o,c;